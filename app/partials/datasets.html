<ol class="breadcrumb">
  <li>Accueil</li>
  <li><a href="/services">Services</a></li>
  <li class="active">{{ service.name }}</li>
</ol>

<div class="row">

  <div class="col-lg-8">
    <div class="panel panel-default">
      <div class="panel-body">
        <input type="search" placeholder="Rechercher..." ng-model="q" class="form-control">
        <br />
        <p style="color:green">
          {{ count | number }} résultat(s) trouvé(s)
          <span ng-if="count"> - Résultats {{ firstResultPos | number }} à {{ lastResultPos | number }}</span>
        </p>
      </div>
    </div>
    <table class="table">
      <tr ng-repeat="dataset in datasets | orderBy:'-score'">
        <td class="vert"><i ng-class="{ 'fa-file-o': dataset.metadata.type === 'dataset', 'fa-database': dataset.metadata.type === 'series' }" class="fa"></i></td>
        <td class="vert">
          <h5><a href="/services/{{ service._id }}/datasets/{{ dataset._id }}">{{ dataset.metadata.title }}</a></h5>
          <p>{{ dataset.metadata.abstract | prune:500 }}</p>
          <p>
            <span ng-repeat="contact in dataset.metadata._contacts track by $index"><span class="label label-danger">{{ contact.organizationName }}</span> </span>
            <span ng-repeat="contact in dataset.metadata.contacts track by $index"><span class="label label-warning">{{ contact.organizationName }}</span> </span>
            <span ng-repeat="keyword in dataset.metadata.keywords track by $index"><span class="label label-info">{{ keyword }}</span> </span>
          </p>
        </td>
      </tr>
    </table>
    <ul class="pager">
      <li class="previous" ng-if="hasPreviousResults()"><a ng-click="paginatePrevious()">&larr; Précédent</a></li>
      <li class="next" ng-if="hasNextResults()"><a ng-click="paginateNext()">Suivant &rarr;</a></li>
    </ul>
  </div>

  <div class="col-lg-4">
    <div ng-repeat="facetType in facets">
      <h4>{{ facetType.label }}</h4>
      <div class="list-group">
        <a href="#" class="list-group-item" ng-repeat="facetValue in facetType.values" ng-click="toggleFacet({ name: facetType.name, value: facetValue.value })" ng-class="{ active: facetIsActive({ name: facetType.name, value: facetValue.value }) }">
          <span class="badge">{{ facetValue.count }}</span>
          {{ facetType.valueLabels[facetValue.value] || facetValue.value }}
        </a>
      </div>
    </div>
  </div>

</div>
